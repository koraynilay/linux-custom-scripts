#!/bin/sh
answ(){
	printf "Update?: "
	read ans
	ans="${ans//$'\n'/ }"
	if [[ "$ans" == "y" || $ans == "yes" ]];then
		sudo pacman -Syu --noconfirm
		main
	else
		main
	fi
}
main(){
	clear
	printf "Updates available:\n\n"
	checkupdates
	exit_code=$?
	if [ $exit_code -eq 2 ];then
		return 0
	fi
	answ
}
trap main USR1
while true;do
	main
	sleep 600 &
	wait $!
done
